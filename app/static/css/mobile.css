/* 
 * OpenNOF1 - Mobile Responsive Styles
 * 通用移动端样式和组件适配
 */

/* ============================================
   手机基础样式 (< 576px)
   ============================================ */

@media (max-width: 576px) {
    /* Navbar 紧凑化 */
    .navbar {
        padding: 0.5rem 0.75rem;
        height: 45px;
    }

    .navbar-brand {
        font-size: 1.1rem;
    }
    
    .navbar .d-flex.align-center {
        font-size: 0.7rem;
    }

    .status-dot {
        width: 8px;
        height: 8px;
        margin-right: 0.3rem;
    }

    /* 按钮适配 */
    .btn {
        padding: 0.5rem 0.8rem;
        font-size: 0.75rem;
    }

    .btn-lg {
        padding: 0.6rem 1rem;
        font-size: 0.85rem;
    }

    .btn-sm {
        padding: 0.25rem 0.4rem;
        font-size: 0.6rem;
    }

    /* 表单适配 - 防止 iOS 缩放 */
    .form-control {
        padding: 0.5rem;
        font-size: 16px;
    }

    .form-label {
        font-size: 0.7rem;
    }

    /* 卡片适配 */
    .card {
        margin-bottom: 0.5rem;
    }

    .card-header {
        padding: 0.4rem 0.6rem;
        font-size: 0.7rem;
    }

    .card-body {
        padding: 0.6rem;
    }

    /* Badge 适配 */
    .badge {
        font-size: 0.55rem;
        padding: 0.1rem 0.35rem;
    }

    /* MCP 调用样式 */
    .mcp-header {
        padding: 0.4rem;
    }

    .mcp-info {
        font-size: 0.7rem;
    }

    .mcp-tool-badge {
        font-size: 0.5rem;
        padding: 0.1rem 0.25rem;
    }

    .mcp-time {
        font-size: 0.5rem;
    }

    .mcp-args-table td {
        display: block;
        width: 100%;
        border: none;
        padding: 0.15rem 0.25rem;
    }

    .mcp-args-table .arg-key {
        font-weight: 800;
        color: var(--text-secondary);
        font-size: 0.55rem;
    }

    .mcp-args-table .arg-value {
        padding-left: 0.5rem;
        border-bottom: 1px dotted var(--border-color);
        margin-bottom: 0.2rem;
        font-size: 0.65rem;
    }

    /* 聊天气泡 */
    .chat-bubble {
        padding: 0.4rem;
        font-size: 0.7rem;
    }

    .chat-avatar {
        font-size: 0.55rem;
    }

    .chat-timestamp {
        font-size: 0.5rem;
    }

    .chat-content {
        font-size: 0.7rem;
    }

    .chat-action {
        font-size: 0.5rem;
        padding: 0.1rem 0.25rem;
    }
}

/* ============================================
   平板样式 (577px - 768px)
   ============================================ */

@media (min-width: 577px) and (max-width: 768px) {
    .navbar {
        padding: 0.6rem 1rem;
    }

    .btn {
        padding: 0.5rem 1rem;
    }
}

/* ============================================
   触屏设备优化
   ============================================ */

@media (hover: none) and (pointer: coarse) {
    /* 更大的点击区域 */
    .btn {
        min-height: 44px;
        min-width: 44px;
    }

    .tab-btn {
        min-height: 44px;
    }

    .toggle-switch {
        width: 50px;
        height: 26px;
    }

    .toggle-slider:before {
        height: 20px;
        width: 20px;
    }

    input:checked + .toggle-slider:before {
        transform: translateX(24px);
    }

    /* 移除 hover 效果 */
    .btn:hover {
        transform: none;
    }

    /* 触摸反馈 */
    .btn:active {
        opacity: 0.8;
        transform: scale(0.98);
    }

    .table tr:hover {
        background: transparent;
    }

    .tool-card-header:hover {
        background: inherit;
    }
}

/* ============================================
   安全区域 (iPhone X+ 刘海屏)
   ============================================ */

@supports (padding: env(safe-area-inset-bottom)) {
    @media (max-width: 576px) {
        .navbar {
            padding-left: max(0.75rem, env(safe-area-inset-left));
            padding-right: max(0.75rem, env(safe-area-inset-right));
            padding-top: max(0.5rem, env(safe-area-inset-top));
        }

        .container {
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        .modal-overlay {
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
    }
}

/* ============================================
   横屏手机
   ============================================ */

@media (max-height: 500px) and (orientation: landscape) {
    .navbar {
        padding: 0.4rem 1rem;
        height: 40px;
    }

    .container {
        height: calc(100vh - 40px);
    }
}

/* ============================================
   深色模式支持
   ============================================ */

@media (prefers-color-scheme: dark) {
    :root {
        --bg-primary: #1a1a1a;
        --bg-secondary: #0d0d0d;
        --text-primary: #ffffff;
        --text-secondary: #999999;
        --border-color: #333333;
    }

    .card-header {
        background: #333333;
    }

    .table th {
        background: #2a2a2a;
    }

    .settings-section-header {
        background: #333333;
        color: #ffffff;
    }

    .tool-badge,
    .mcp-tool-badge {
        background: #ffffff;
        color: #1a1a1a;
    }
}

/* ============================================
   打印样式 (可选)
   ============================================ */

@media print {
    .navbar,
    .tabs-header,
    .control-buttons,
    .modal-overlay {
        display: none !important;
    }

    .container {
        height: auto;
        overflow: visible;
    }

    .dashboard-grid {
        display: block;
    }
}